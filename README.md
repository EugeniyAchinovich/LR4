# LR4

# Лабораторная работа #4

 ***Описание:***
  * Лабораторная работа #4 является "надстройкой" над лабораторной работой #3 и использует ее функционал в полной мере.
  * Некоторые решения из ЛР3 были изменены в угоду определённым требованиям из условия ЛР4, а именно:
    ** Код стал более модульным. В частности, набор методов для работы с файлами и менеджер конфигураций теперь являются подключаемыми namespace, определенными в отдельных файлах.
    ** Оба файла конфигурации, а также соответствующий набор полей по умолчанию на стороне .NET, дополнились параметром connectionString, отвечающим за значение подключаемой строки, являющимся ключевым для связывания .NET стороны и базы данных SQL.
  * Текущая ЛР представлена файлами такими же, как и ЛР3, а также
      + (C#) AccessLayer.cs          - слой для работы с базой данных(Data Service Layer - из условия). Распологает в себе интерфейс IReadable, который может получаеть данные всех пяти моделей(каких именно - см. далее). Используется для реализации классов этих моделей в файле DB_Tables.
      + (C#) XML_File_Generator.cs   - создание XML документа из SQL модели(в данном случае, таблицы SQL. В .NET стороне ей соответствует Сlass DB_Table(файл DB_Table_mainClass) - общий класс, сожержащий все подмодели). Помимо XML документа, здесь же создаётся его XSD схема.
      + (C#) ConfigManager.cs        - менеджер конфигураций, определяющий наличие нужных config(XML или JSON) файлов, считывающий с них данные и передающий их программу.
      + (C#) DB_Tables_mainClass.cs  - собственно, модель, соответствующая модели(таблице) на стороне SQL. Является С# классом с именем TB_Table. Имеет поля: "person", "sales", "production", типы которых одноимённы названиям своих переменных в данном случае(public Person person, и т.д.). Эти типы(классы) определены в файле DB_Tables. Класс модели имеет конструктор, позволяющий создавать объект класса с этими, уже заполненными полями.
      + (C#) DB_Tables.cs            - содержит классы моделей "меньшего порядка"(или подмоделей), а именно "person", "sales", "production". Все эти классы применяют интерфейс IReadable из файла AccessLayer.
      + (C#) FileMethodsLib.cs       - "сборник" методов для работы с уже готовым XML документом(сжатие, шифрование, перемещение и т.д.) и вспомогательные методы для работы с директориями. 
      + (C#) ServiceLayer            - класс с методом присваивающим значение строки подключения к базе данных. Значение берётся менеджером из конфигов, либо из программы, если таких конфигов нет.
      
      + База данных:
        ** Сервер базы данных создан(развёрнут) с помощью приложения MySQL Server 2012.
        ** Адрес является заданным программой по умолчанию. Значение адреса впоследствии является значением в строках подключения к БД и находится в конфигах и в поле по умолчанию на стороне .NET.
        ** Подключение к серверу, восстановление готовой БД и написание базовых хранимых процедур для работы с БД производились в Microsoft SQL Server Management Studio 2014.
        ** База данных восстановлена из бэкапа AdventureWorks2019.bak, скачанного с оф. сайта Microsoft по ссылке из условия ЛР4.
        ** Для работы из базы AdventureWorks2019 взяты такие модели(таблицы), как "personName", "personPhone", "productionProduct", "productionProductInventory" и "creditCard" - всего таблиц 5.
      
 ***Выполнение требований:***
  * Выполнено основное требование - генерация xml файла на основе имеющейся базы данных с необходимым содержанием и впоследствии отправление его на FTP-сервер с совершением файловых манипуляций из ЛР2-3, также с учетом конфигов из ЛР3. Программа ЛР4 является службами Windows.
  * Если рассматривать по условию детально, то выполнены создание сервера, восстановление бд, создание процедур на сторое SQL, создание accessLayer, serviceLayer, генератор XML файлов, доработан config менеджер; Файлы представляют отдельные namespace и подключаются к проекту - следовательно, код модульный; Статика отсутствует, как отстуствуют готовые мапперы, ORM-библиотеки.
  ***
  ***!! Не выполнены пункты 13-14 - создание отдельной БД для логирования ошибок AdventureWorks/Northwind.ApplicationInsights и уровень DAL для работы с ней !!
  ***!! Пункт 8: создание XML документа есть, но оно в моем случае НЕ является сервисом !!
